#summary ATA/IDE Hard disk documentation.

= Introduction =

  NOTICE: This documentation does NOT fully describe the ATA/IDE hard disk device, for professional knowledge, please refer to the references listed below.

  ATA/IDE Interface is used in PC architectures providing controlling to hard disk and CD-ROM, DVD-ROM access. It is a industrial standard mainly maintained by T13 organization and ANSI.

  This documentation provides the essential information on ATA/IDE hard disk controlling.

= I/O Interface =

  PC architecture commonly implements 4 channels of ATA/IDE bus, providing access to floppy disk, hard disk, CD/DVD-ROMs.

  Two ATA/IDE controller are attached to ports:
    * 0x1f0 -> I/O base of first controller
    * 0x3f0 -> I/O base of second controller

  Each controller contains 2 channels so there are 4 channels in total.

  REGISTERS:
    * 0 (r-)-> Data Register
    * 1 (r-)-> Error Register
    * 1 (-w)-> Feature Register
    * 2 (rw)-> Sector Count Register
    * 3 (rw)-> Sector Register
    * 4 (rw)-> Cylinder Low Register
    * 5 (rw)-> Cylinder High Register
    * 6 (rw)-> Device Register
    * 7 (r-)-> Status Register
    * 7 (-w)-> Command Register

= IRQ Resource =

  Commonly the ATA/IDE controller is linked to IRQs:
    * 14 -> IRQ of first controller
    * 15 -> IRQ of second controller

= Command Set & Programming Method =

  Please Refer To T13 Publication: 
 _Information Technology - AT Attachment with Packet Interface - 5 (ATA/ATAPI-5)_

= Sample Access Sessions =

  COMMAND_READ:
  {{{
  // CHS mode access
  unsigned short *buf = buffer;
  outportb(Reg_Sector_Count, Sector_Count);
  outportb(Reg_Sector, Sector);
  outportb(Reg_Cylinder_High, Cylinder&0xFF);
  outportb(Reg_Cylinder_Low, (Cylinder>>8)&0xFF);
  outportb(Reg_Device, Head&0xF);
  outportb(Reg_Command, CMD_READ);
  wait_for_interrupt();
  while(inportb(Reg_Status) & 0x08)    // Poll until DRQ = 0
      *buf++ = inportw(Reg_Data);      // NOTICE: data width is word
  }}}

= References =

  * [http://www.t13.org T13 Organization Publications]











