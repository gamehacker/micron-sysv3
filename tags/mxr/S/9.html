<html>
<head>
<title>kernel/arch/i386/cpu/isr.s</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.5'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/47.html'>kernel</a>/<a href='../files/48.html'>arch</a>/<a href='../files/49.html'>i386</a>/<a href='../files/51.html'>cpu</a>/isr.s</h2>
<i><font color='green'>/* [&lt;][&gt;][^][v][top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*****************************************************************************</font></i>
<a name='L2'><i><font color='green'> * Micron System V3 - I386 Architecture Driver</font></i>
<a name='L3'><i><font color='green'> * Copyright (C) 2007, Micron System Team</font></i>
<a name='L4'><i><font color='green'> * Copyright (C) 2007, Martin Tang</font></i>
<a name='L5'><i><font color='green'> * PROTECTED UNDER MICRON SYSTEM PUBLIC LICENSE AGREEMENT</font></i>
<a name='L6'><i><font color='green'> *****************************************************************************</font></i>
<a name='L7'><i><font color='green'> * Design Notes:</font></i>
<a name='L8'><i><font color='green'> *</font></i>
<a name='L9'><i><font color='green'> * Interrupt Controller:</font></i>
<a name='L10'><i><font color='green'> *   Intel 8259A Compatiable</font></i>
<a name='L11'><i><font color='green'> *</font></i>
<a name='L12'><i><font color='green'> * Implementation:</font></i>
<a name='L13'><i><font color='green'> *    0 ~ 31:   IA32 processor internal interrupt</font></i>
<a name='L14'><i><font color='green'> *   32 ~ 48:   PIC interrupts</font></i>
<a name='L15'><i><font color='green'> *      0x80:   System call entry</font></i>
<a name='L16'><i><font color='green'> *     other:   No effect when triggered, reserved for software signal</font></i>
<a name='L17'><i><font color='green'> *</font></i>
<a name='L18'><i><font color='green'> * Exception list:</font></i>
<a name='L19'><i><font color='green'> *   Generated by processor.</font></i>
<a name='L20'><i><font color='green'> *  NO - Description            Type    ErrCode Source</font></i>
<a name='L21'><i><font color='green'> *   0 - Divide Error           fault   no      DIV and IDIV instruction</font></i>
<a name='L22'><i><font color='green'> *   1 - RESERVED               fault   no      For Intel use only</font></i>
<a name='L23'><i><font color='green'> *   2 - NMI Interrupt          intr    no      Nonmaskable external interrupt</font></i>
<a name='L24'><i><font color='green'> *   3 - Breakpoint             trap    no      INT3 Instruction</font></i>
<a name='L25'><i><font color='green'> *   4 - Overflow               trap    no      INTO Instruction</font></i>
<a name='L26'><i><font color='green'> *   5 - BOUND Range Exceeded   fault   no      BOUND instruction</font></i>
<a name='L27'><i><font color='green'> *   6 - Invalid Opcode         fault   no      UD2 instruction or undefined</font></i>
<a name='L28'><i><font color='green'> *   7 - Device Not Available   fault   no      Float-point or WAIT/FWAIT</font></i>
<a name='L29'><i><font color='green'> *   8 - Double Fault           abort   yes     Any instruction</font></i>
<a name='L30'><i><font color='green'> *   9 - Coprocessor Segment OR fault   no      Floating point instruction</font></i>
<a name='L31'><i><font color='green'> *  10 - Invalid TSS            fault   yes     Task switch or TSS access</font></i>
<a name='L32'><i><font color='green'> *  11 - Segment Not Present    fault   yes     Loading segment reg or acc seg</font></i>
<a name='L33'><i><font color='green'> *  12 - Stack Segment Fault    fault   yes     Stack ops and SS reg loads</font></i>
<a name='L34'><i><font color='green'> *  13 - General Protection     fault   yes     Any protection check</font></i>
<a name='L35'><i><font color='green'> *  14 - Page Fault             fault   yes     Any memory reference</font></i>
<a name='L36'><i><font color='green'> *  15 - RESERVED                       no</font></i>
<a name='L37'><i><font color='green'> *  16 - x87 FPU FP Error       fault   no      x87 FPU or WAIT/FWAIT inst</font></i>
<a name='L38'><i><font color='green'> *  17 - Alignment Check        fault   yes(0)  Any data ref in mem</font></i>
<a name='L39'><i><font color='green'> *  18 - Machine Check          abort   no      Err codes</font></i>
<a name='L40'><i><font color='green'> *  19 - SIMD FP Exception      fault   no      SSE/SSE2/SSE3 FP inst</font></i>
<a name='L41'><i><font color='green'> * 20~31 Intel Reserved</font></i>
<a name='L42'><i><font color='green'> * 32~255 User Defined          intr            INT n instruction</font></i>
<a name='L43'><i><font color='green'> *</font></i>
<a name='L44'><i><font color='green'> * IRQ list:</font></i>
<a name='L45'><i><font color='green'> *  -- PIC1 --</font></i>
<a name='L46'><i><font color='green'> *   0 - timer interrupt</font></i>
<a name='L47'><i><font color='green'> *   1 - keyboard, mouse, RTC interrupt</font></i>
<a name='L48'><i><font color='green'> *   2 - video interrupt</font></i>
<a name='L49'><i><font color='green'> *   3 - serial port 2 interrupt</font></i>
<a name='L50'><i><font color='green'> *   4 - serial port 1 interrupt</font></i>
<a name='L51'><i><font color='green'> *   5 - fixed disk interrupt</font></i>
<a name='L52'><i><font color='green'> *   6 - diskket interrupt</font></i>
<a name='L53'><i><font color='green'> *   7 - parallel printer interrupt</font></i>
<a name='L54'><i><font color='green'> *  -- PIC2 --</font></i>
<a name='L55'><i><font color='green'> *   8 - real-time clock interrupt</font></i>
<a name='L56'><i><font color='green'> *   9 - redirect cascade</font></i>
<a name='L57'><i><font color='green'> *  10 - reserved</font></i>
<a name='L58'><i><font color='green'> *  11 - reserved</font></i>
<a name='L59'><i><font color='green'> *  12 - mouse interrupt</font></i>
<a name='L60'><i><font color='green'> *  13 - coprocessor exception interrupt</font></i>
<a name='L61'><i><font color='green'> *  14 - fixed disk interrupt</font></i>
<a name='L62'><i><font color='green'> *  15 - reserved</font></i>
<a name='L63'><i><font color='green'> *</font></i>
<a name='L64'><i><font color='green'> * References:</font></i>
<a name='L65'><i><font color='green'> *   Ralf Brown's Interrupt List</font></i>
<a name='L66'><i><font color='green'> *****************************************************************************/</font></i>
<a name='L67'>
<a name='L68'>.extern i386_isr_entry
<a name='L69'>isr_handler:
<a name='L70'>        pusha
<a name='L71'>        pushl %ss
<a name='L72'>        pushl %ds
<a name='L73'>        pushl %es
<a name='L74'>        pushl %fs
<a name='L75'>        pushl %gs
<a name='L76'>        mov $0x10, %ax
<a name='L77'>        mov %ax, %ss
<a name='L78'>        mov %ax, %ds
<a name='L79'>        mov %ax, %es
<a name='L80'>        mov %ax, %fs
<a name='L81'>        mov %ax, %gs
<a name='L82'>
<a name='L83'>        movl  %esp, %eax
<a name='L84'>        pushl %eax
<a name='L85'>        movl  $i386_isr_entry, %eax
<a name='L86'>        call *%eax
<a name='L87'>        popl  %eax
<a name='L88'>
<a name='L89'>        popl %gs
<a name='L90'>        popl %fs
<a name='L91'>        popl %es
<a name='L92'>        popl %ds
<a name='L93'>        popl %ss
<a name='L94'>        popa
<a name='L95'>        addl $8, %esp   <i><font color='green'>/* clean up the error code that still in the stack */</font></i>
<a name='L96'>        iret
<a name='L97'>
<a name='L98'>.global isr0; isr0:
<a name='L99'>        pushl $0
<a name='L100'>        pushl $0
<a name='L101'>        jmp isr_handler
<a name='L102'>
<a name='L103'>.global isr1; isr1:
<a name='L104'>        pushl $0
<a name='L105'>        pushl $1
<a name='L106'>        jmp isr_handler
<a name='L107'>        
<a name='L108'>.global isr2; isr2:
<a name='L109'>        pushl $0
<a name='L110'>        pushl $2
<a name='L111'>        jmp isr_handler
<a name='L112'>        
<a name='L113'>.global isr3; isr3:
<a name='L114'>        pushl $0
<a name='L115'>        pushl $3
<a name='L116'>        jmp isr_handler
<a name='L117'>        
<a name='L118'>.global isr4; isr4:
<a name='L119'>        pushl $0
<a name='L120'>        pushl $4
<a name='L121'>        jmp isr_handler
<a name='L122'>
<a name='L123'>.global isr5; isr5:
<a name='L124'>        pushl $0
<a name='L125'>        pushl $5
<a name='L126'>        jmp isr_handler
<a name='L127'>
<a name='L128'>.global isr6; isr6:
<a name='L129'>        pushl $0
<a name='L130'>        pushl $6
<a name='L131'>        jmp isr_handler
<a name='L132'>
<a name='L133'>.global isr7; isr7:
<a name='L134'>        pushl $0
<a name='L135'>        pushl $7
<a name='L136'>        jmp isr_handler
<a name='L137'>
<a name='L138'>.global isr8; isr8:
<a name='L139'>        pushl $8
<a name='L140'>        jmp isr_handler
<a name='L141'>
<a name='L142'>.global isr9; isr9:
<a name='L143'>        pushl $0
<a name='L144'>        pushl $9
<a name='L145'>        jmp isr_handler
<a name='L146'>
<a name='L147'>.global isr10; isr10:
<a name='L148'>        pushl $10
<a name='L149'>        jmp isr_handler
<a name='L150'>
<a name='L151'>.global isr11; isr11:
<a name='L152'>        pushl $11
<a name='L153'>        jmp isr_handler
<a name='L154'>
<a name='L155'>.global isr12; isr12:
<a name='L156'>        pushl $12
<a name='L157'>        jmp isr_handler
<a name='L158'>        
<a name='L159'>.global isr13; isr13:
<a name='L160'>        pushl $13
<a name='L161'>        jmp isr_handler
<a name='L162'>        
<a name='L163'>.global isr14; isr14:
<a name='L164'>        pushl $14
<a name='L165'>        jmp isr_handler
<a name='L166'>
<a name='L167'>.global isr15; isr15:
<a name='L168'>        pushl $0
<a name='L169'>        pushl $15
<a name='L170'>        jmp isr_handler
<a name='L171'>
<a name='L172'>.global isr16; isr16:
<a name='L173'>        pushl $0
<a name='L174'>        pushl $16
<a name='L175'>        jmp isr_handler
<a name='L176'>
<a name='L177'>.global isr17; isr17:
<a name='L178'>        pushl $17
<a name='L179'>        jmp isr_handler
<a name='L180'>
<a name='L181'>.global isr18; isr18:
<a name='L182'>        pushl $0
<a name='L183'>        pushl $18
<a name='L184'>        jmp isr_handler
<a name='L185'>
<a name='L186'>.global isr19; isr19:
<a name='L187'>        pushl $0
<a name='L188'>        pushl $19
<a name='L189'>        jmp isr_handler
<a name='L190'>
<a name='L191'>.global isr20; isr20:
<a name='L192'>        pushl $0
<a name='L193'>        pushl $20
<a name='L194'>        jmp isr_handler
<a name='L195'>
<a name='L196'>.global isr21; isr21:
<a name='L197'>        pushl $0
<a name='L198'>        pushl $21
<a name='L199'>        jmp isr_handler
<a name='L200'>
<a name='L201'>.global isr22; isr22:
<a name='L202'>        pushl $0
<a name='L203'>        pushl $22
<a name='L204'>        jmp isr_handler
<a name='L205'>        
<a name='L206'>.global isr23; isr23:
<a name='L207'>        pushl $0
<a name='L208'>        pushl $23
<a name='L209'>        jmp isr_handler
<a name='L210'>        
<a name='L211'>.global isr24; isr24:
<a name='L212'>        pushl $0
<a name='L213'>        pushl $24
<a name='L214'>        jmp isr_handler
<a name='L215'>
<a name='L216'>.global isr25; isr25:
<a name='L217'>        pushl $0
<a name='L218'>        pushl $25
<a name='L219'>        jmp isr_handler
<a name='L220'>
<a name='L221'>.global isr26; isr26:
<a name='L222'>        pushl $0
<a name='L223'>        pushl $26
<a name='L224'>        jmp isr_handler
<a name='L225'>
<a name='L226'>.global isr27; isr27:
<a name='L227'>        pushl $0
<a name='L228'>        pushl $27
<a name='L229'>        jmp isr_handler
<a name='L230'>
<a name='L231'>.global isr28; isr28:
<a name='L232'>        pushl $0
<a name='L233'>        pushl $28
<a name='L234'>        jmp isr_handler
<a name='L235'>
<a name='L236'>.global isr29; isr29:
<a name='L237'>        pushl $0
<a name='L238'>        pushl $29
<a name='L239'>        jmp isr_handler
<a name='L240'>
<a name='L241'>.global isr30; isr30:
<a name='L242'>        pushl $0
<a name='L243'>        pushl $30
<a name='L244'>        jmp isr_handler
<a name='L245'>
<a name='L246'>.global isr31; isr31:
<a name='L247'>        pushl $0
<a name='L248'>        pushl $31
<a name='L249'>        jmp isr_handler
<a name='L250'>
<a name='L251'>.global isr32; isr32:
<a name='L252'>        pushl $0
<a name='L253'>        pushl $32
<a name='L254'>        jmp isr_handler
<a name='L255'>        
<a name='L256'>.global isr33; isr33:
<a name='L257'>        pushl $0
<a name='L258'>        pushl $33
<a name='L259'>        jmp isr_handler
<a name='L260'>        
<a name='L261'>.global isr34; isr34:
<a name='L262'>        pushl $0
<a name='L263'>        pushl $34
<a name='L264'>        jmp isr_handler
<a name='L265'>
<a name='L266'>.global isr35; isr35:
<a name='L267'>        pushl $0
<a name='L268'>        pushl $35
<a name='L269'>        jmp isr_handler
<a name='L270'>
<a name='L271'>.global isr36; isr36:
<a name='L272'>        pushl $0
<a name='L273'>        pushl $36
<a name='L274'>        jmp isr_handler
<a name='L275'>
<a name='L276'>.global isr37; isr37:
<a name='L277'>        pushl $0
<a name='L278'>        pushl $37
<a name='L279'>        jmp isr_handler
<a name='L280'>
<a name='L281'>.global isr38; isr38:
<a name='L282'>        pushl $0
<a name='L283'>        pushl $38
<a name='L284'>        jmp isr_handler
<a name='L285'>
<a name='L286'>.global isr39; isr39:
<a name='L287'>        pushl $0
<a name='L288'>        pushl $39
<a name='L289'>        jmp isr_handler
<a name='L290'>
<a name='L291'>.global isr40; isr40:
<a name='L292'>        pushl $0
<a name='L293'>        pushl $40
<a name='L294'>        jmp isr_handler
<a name='L295'>
<a name='L296'>.global isr41; isr41:
<a name='L297'>        pushl $0
<a name='L298'>        pushl $41
<a name='L299'>        jmp isr_handler
<a name='L300'>
<a name='L301'>.global isr42; isr42:
<a name='L302'>        pushl $0
<a name='L303'>        pushl $42
<a name='L304'>        jmp isr_handler
<a name='L305'>        
<a name='L306'>.global isr43; isr43:
<a name='L307'>        pushl $0
<a name='L308'>        pushl $43
<a name='L309'>        jmp isr_handler
<a name='L310'>        
<a name='L311'>.global isr44; isr44:
<a name='L312'>        pushl $0
<a name='L313'>        pushl $44
<a name='L314'>        jmp isr_handler
<a name='L315'>
<a name='L316'>.global isr45; isr45:
<a name='L317'>        pushl $0
<a name='L318'>        pushl $45
<a name='L319'>        jmp isr_handler
<a name='L320'>
<a name='L321'>.global isr46; isr46:
<a name='L322'>        pushl $0
<a name='L323'>        pushl $46
<a name='L324'>        jmp isr_handler
<a name='L325'>
<a name='L326'>.global isr47; isr47:
<a name='L327'>        pushl $0
<a name='L328'>        pushl $47
<a name='L329'>        jmp isr_handler
<a name='L330'>
<a name='L331'>.global isr_invalid; isr_invalid:
<a name='L332'>        pushl $0
<a name='L333'>        pushl $0xFF
<a name='L334'>        jmp isr_handler
<a name='L335'>
<a name='L336'>.global isr_syscall; isr_syscall:
<a name='L337'>        pushl $0
<a name='L338'>        pushl $0x80
<a name='L339'>        jmp isr_handler
<a name='L340'>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;][^][v]<a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
